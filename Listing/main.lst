C51 COMPILER V9.54   MAIN                                                                  11/21/2020 14:25:50 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN ..\Output\main.obj
COMPILER INVOKED BY: D:\keilARM\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(..\Listing\main
                    -.lst) TABS(2) OBJECT(..\Output\main.obj)

line level    source

   1          /**********************************************************************************
   2           //SIMXXXÏµÁÐ¿ª·¢°åµ×²ã´úÂë
   3           //È«ÇòÓ¥µç×Ó@UNV
   4           //°æ±¾ºÅ;V1.0
   5           //¹Ù·½ÌÔ±¦µêµØÖ·£ºhttps://shop110330041.taobao.com
   6           //°æÈ¨ËùÓÐ£¬µÁ°æ±Ø¾¿
   7           * ¹¤³ÌÃû  :Í¨TCP·½Ê½£¬Ïò·þÎñÆ÷Ìá½»Êý¾Ý
   8           * ÃèÊö    :Ïò¹Ì¶¨µÄ·þÎñÆ÷µØÖ·£¬ÉÏ´«²âÊÔÊý¾Ý
   9           * ÊµÑéÆ½Ì¨:STC89XX
  10           * ¿â°æ±¾  :
  11          
  12          **********************************************************************************/
  13          
  14          #include "string.h"
  15          #include "delay.h"
  16          #include "uart.h"
  17          #include "timer0.h"
  18          #include "SIMxxx.h"
  19          #include "lcd.h"
  20          
  21          
  22          /*************  Íâ²¿º¯ÊýºÍ±äÁ¿ÉùÃ÷*****************/
  23          /*******************************************************************************
  24          * º¯ÊýÃû : main 
  25          * ÃèÊö   : Ö÷º¯Êý
  26          * ÊäÈë   : 
  27          * Êä³ö   : 
  28          * ·µ»Ø   : 
  29          * ×¢Òâ   : 
  30          *******************************************************************************/
  31          void main(void)
  32          {
  33   1        u8 flag=1;
  34   1        u8 cmd_1[3];
  35   1        u8 res;
  36   1        Uart1Init();
  37   1        LcdInit();
  38   1        Timer0Init();
  39   1        EA=1; //¿ª×ÜÖÐ¶Ï
  40   1        res=1;
  41   1        xianshi_x_y(2,5,"work",4);  
  42   1        while(res)
  43   1        {
  44   2          res=sim900a_work_test();
  45   2        }
  46   1        xianshi_x_y(2,5,"1_OK",4);
  47   1        res=1;
  48   1        while(res)
  49   1        {
  50   2          res=SIM900A_CONNECT_SERVER();   //Êµ¼ÊÓ¦ÓÃÊ±£¬Ö»ÐèÒª¸ü¸Ä´Ë´¦µÄ·þÎñÆ÷µØÖ·¼´¿É
  51   2        }
  52   1        xianshi_x_y(2,5,"2_OK",4);
  53   1        res=1;
  54   1        while(res)
C51 COMPILER V9.54   MAIN                                                                  11/21/2020 14:25:50 PAGE 2   

  55   1        {
  56   2          res=SIM900A_GPRS_SEND_DATA();      //¿É¸ü¸ÄÎª×Ô¼ºÏëÒª·¢ËÍµÄÄÚÈÝ                                             //UNCION±àÂë¹¤¾ßÒ»°
             -ãÔÚ×ÊÁÏ°ü¹¤¾ßÎÄ¼þ¼ÐÄÚ
  57   2        }
  58   1          while(1)
  59   1        {
  60   2          
  61   2          xianshi_x_y(2,5,"3_OK",4);  
  62   2        if(flag)
  63   2        {
  64   3         if(sim900a_send_cmd("AT+CIPSEND\r\n",">",200))  flag=1;
  65   3          
  66   3         if(sim900a_send_cmd((u8 *)"{\"M\":\"update\",\"ID\":\"19978\",\"V\":{\"17935\":\"1\"}}\r\n",NULL,50))  fl
             -ag=1;
  67   3         cmd_1[0]=0x1a;cmd_1[1]=0;
  68   3         
  69   3         if(sim900a_send_cmd(cmd_1,(u8 *)"SEND OK",1200)) flag=1;   
  70   3        
  71   3          flag=0;
  72   3         
  73   3        }
  74   2          delay_ms(1000);
  75   2          delay_ms(1000);
  76   2          delay_ms(1000);
  77   2          delay_ms(1000);
  78   2          delay_ms(1000);
  79   2        flag=1;
  80   2        }
  81   1      }
  82          
  83          
  84          
  85          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    263    ----
   CONSTANT SIZE    =     91    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
